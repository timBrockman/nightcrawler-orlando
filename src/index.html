<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>&#128249; NightCrawler: Florida Man Edition</title>
    <!--cssstart-->
    <link rel="stylesheet" href="css/style.css" media="screen">
    <!--cssend-->
</head>
<body>
	<header id="header">
	  <h1 class="center">&#128249; NightCrawler: Florida&nbsp;Man&nbsp;Edition</h1>
    <hr />
    <nav data-bind="foreach:vmSpots">
      <a class="navItem" data-bind="
        text:title,
        attr:{},
        style:{},
        click:function(data){console.log(data.mid);},
        event:{
          mouseover:mouseoverMarker,
          mouseout:mouseoutMarker}">loading 24 hour spots...</a>
    </nav>
	</header>
  <main>
    <div id="callBox">
      <div class="center">Filter:
        <input id="accidentFilter"
          type="checkbox"
          data-bind="checked:onlyAccidents,
          event:{change:hideGenCalls}" />
      <label for="accidentFilter"> Calls</label></div>
      <ul data-bind="foreach:vmCalls">
        <li class="callItem" data-bind="
          text:description,
          css:{accident: isAccident},
          visible: filterAccident,
          click:function(data){console.log(data.isAccident);},
          event:{
            mouseover:mouseoverMarker,
            mouseout:mouseoutMarker}">loading calls...</li>
      </ul>
    </div>
    <div id="map"></div>
  </main>
  <footer>
    <nav>
      <a class="navItem" target="_blank" href="https://github.com/timBrockman/nightcrawler-orlando">Github repo</a>
      <a class="navItem" target="_blank" href="https://developer.yahoo.com/yql/">Yahoo's YQL</a>
      <a class="navItem" target="_blank" href="http://knockoutjs.com/">Knockout.js</a>
      <a class="navItem" target="_blank" href="https://jquery.com/">jQuery</a>
      <a class="navItem" target="_blank" href="https://developers.google.com/maps/">Google Maps</a>
      <a class="navItem" target="_blank" href="https://www.udacity.com/degrees/front-end-web-developer-nanodegree--nd001">Udacity FEND</a>
    </nav>
    <div class="center legal">This project works, thanks to the above resources. Copyright &copy;2016 Tim Brockman</div>
  </footer>
<!--jsstart-->
  <script src="js/247.js"></script>
  <script src="js/calls.js"></script>
  <script src="js/models.js"></script>
  <script src="js/vms.js"></script>
  <script src="js/views.js"></script>
<!--jsend-->

  <script>
//map (must load before map api callback)
// Create a map variable
var map;
var geocode;
var styles = [
  {
    "featureType": "landscape",
    "elementType": "geometry",
    "stylers": [
      { "visibility": "on" },
      { "color": "#000000" }
    ]
  },{
    "featureType": "road",
    "elementType": "labels.text",
    "stylers": [
      { "visibility": "on" },
      { "color": "#ff0000" }
    ]
  },{
    "featureType": "road",
    "elementType": "labels.text.fill",
    "stylers": [
      { "visibility": "off" }
    ]
  },{
    "featureType": "road",
    "elementType": "geometry",
    "stylers": [
      { "color": "#00ff00" }
    ]
  },{
    "featureType": "poi",
    "stylers": [
      { "visibility": "off" }
    ]
  },{
    "featureType": "administrative",
    "stylers": [
      { "visibility": "off" }
    ]
  },{
    "featureType": "transit",
    "stylers": [
      { "visibility": "off" }
    ]
  },{
    "featureType": "water",
    "stylers": [
      { "color": "#0000ff" }
    ]
  }
];
//global markerIcons
var markerIcons = [];
var spotMarkers = [];
//generate different map icons
function initIcons(){
  var iconUrls =[
    "http://icons.iconarchive.com/icons/mad-science/arcade-saturdays/32/Shadow-Blinky-icon.png",
    "http://icons.iconarchive.com/icons/mad-science/arcade-saturdays/32/Bashfull-Inky-icon.png",
    "http://icons.iconarchive.com/icons/mad-science/arcade-saturdays/32/Pokey-Clyde-icon.png",
    "http://icons.iconarchive.com/icons/mad-science/arcade-saturdays/32/Speedy-Pinky-icon.png",
    "http://icons.iconarchive.com/icons/mad-science/arcade-saturdays/32/Edible-Ghost-icon.png",
    "http://icons.iconarchive.com/icons/mad-science/arcade-saturdays/32/Strawberry-Bonus-icon.png",
    "http://icons.iconarchive.com/icons/mad-science/arcade-saturdays/32/Onion-Bonus-icon.png"
    ];
  var max = iconUrls.length;
  for(var i = 0; i < max; i++){
    markerIcons.push(makeIcon(iconUrls[i]));
  }
  function makeIcon(icon){
    return new google.maps.MarkerImage(
      icon,
      new google.maps.Size(32, 32),
      new google.maps.Point(0, 0),
      new google.maps.Point(0, 16)
    );
  }
}
// Function to initialize the map within the map div
function initMap() {
  map = new google.maps.Map(document.getElementById('map'), {
    center: {lat: 28.537211, lng: -81.377001},
    zoom: 11,
    styles:styles
  });
  geocoder = new google.maps.Geocoder();
  initIcons();
}
  </script>

  <script async defer src="https://cdnjs.cloudflare.com/ajax/libs/knockout/3.4.0/knockout-min.js"></script>
  <script async defer src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.0/jquery.min.js"></script>
  <script async defer src="https://maps.googleapis.com/maps/api/js?v=3&key=AIzaSyDEVVmIWFHRlfayjnj6zwWbs72eUBRu2cs&callback=initMap"></script>

</body>
